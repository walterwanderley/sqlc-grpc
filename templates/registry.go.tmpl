// Code generated by sqlc-grpc (https://github.com/walterwanderley/sqlc-grpc). DO NOT EDIT.

package main

import (
    "context"
    "database/sql"

    "github.com/jackc/pgx/v5/pgxpool"
	"google.golang.org/grpc"

    {{range .Packages}}app_{{.Package}} "{{ .GoModule}}/{{.SrcPath}}"
	{{end}}	"{{ .GoModule}}/internal/server"
    {{range .Packages}}pb_{{.Package}} "{{ .GoModule}}/api/{{.Package | SnakeCase}}/v1"
	{{end}}
)

func registerServer(db {{if eq .SqlPackage "pgx/v5"}}*pgxpool.Pool{{else}}*sql.DB{{end}}) server.RegisterServer {
    return func(grpcServer *grpc.Server) {
        {{range .Packages}}pb_{{.Package}}.Register{{ .Package | PascalCase}}ServiceServer(grpcServer, app_{{.Package}}.NewService(app_{{.Package}}.New({{if not .EmitDbArgument}}db{{end}}), db))
        {{end}}
    }
}

func registerHandlers() []server.RegisterHandlerFromEndpoint {
    var handlers []server.RegisterHandlerFromEndpoint

    {{range .Packages}}handlers = append(handlers, pb_{{.Package}}.Register{{ .Package | PascalCase}}ServiceHandlerFromEndpoint)
	{{end}}

    return handlers
}